{% macro entry(ent) %}
  <tr>
    {% set icon = ent.guess_icon() %}
    <td class="icon">
      {% if icon %}
        <img src="{{ icon|e }}" />
      {% endif %}
    </td>
    <td class="name"><a href="/{{ ent.path|e }}">
      {%- if ent.name == ".." -%}
        Parent folder
      {%- else -%}
        {{ ent.name|e }}
      {%- endif -%}
    </a></td>
    <td class="modified">{{ ent.modified }}</td>
    <td class="size">
      {% if ent.size %}
        {{ ent.size|filesizeformat }}
      {% else %}
        -
      {% endif %}
    </td>
  </tr>
{% endmacro %}

{% macro th(key, label, colspan=1) %}
  <th class="{{ key|e }}" colspan="{{ colspan|e }}">
    {%- if sort_by == key and order > 0 -%}
      <a href="?sort_by={{ key|e }}&order=desc">{{ label|e }}</a>
    {%- else -%}
      <a href="?sort_by={{ key|e }}">{{ label|e }}</a>
    {%- endif -%}
    {%- if sort_by == key -%}
      {%- if order > 0 -%}
        <img src="{{ url_for("static", filename="asc.gif")|e }}" alt="ASC" />
      {%- elif order < 0 -%}
        <img src="{{ url_for("static", filename="desc.gif")|e }}" alt="DESC" />
      {%- endif -%}
    {%- endif -%}
  </th>
{% endmacro %}

{% macro thead() %}
  <tr>
    {{ th("name", "Name", 2) }}
    {{ th("modified", "Last modified") }}
    {{ th("size", "Size") }}
  </tr>
{% endmacro %}

{% macro breadcrumb(ent) %}
  {% set parent = ent.parent %}
  {% if parent %}
    {{ breadcrumb(parent) }}
    <span class="sep">&raquo;</span>
  {% endif %}
  <a href="{{ url_for("browse", path=ent.path)|e }}">
    {% set icon = ent.guess_icon() %}
    {% if icon %}
      <img src="{{ icon|e }}" />
    {% endif %}
    {% if not ent.is_root() %}
      {{ ent.name|e }}
    {% endif %}
  </a>
{% endmacro %}

